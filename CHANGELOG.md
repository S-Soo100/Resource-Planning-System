# Changelog

모든 주목할 만한 변경사항이 이 파일에 기록됩니다.

형식은 [Keep a Changelog](https://keepachangelog.com/ko/1.0.0/)를 기반으로 하며,
이 프로젝트는 [Semantic Versioning](https://semver.org/spec/v2.0.0.html)을 준수합니다.

## v1.6.3 (2025-08-05)

### 수정됨 (Fixed)

- **데모 수정 날짜 파싱 오류**: 서버에서 날짜 파싱 시 발생하는 `Invalid Date` 에러 해결
  - 날짜 형식을 `YYYY-MM-DD`로 단순화하여 서버 파싱 안정성 향상
  - 빈 문자열이나 undefined 날짜 필드를 서버 전송 전에 제거
  - `toKSTDateString` 함수 개선으로 서버 호환성 확보

## v1.6.2 (2025-08-04)

### 개선됨 (Improved)

- **시연 수정 권한 개선**: Admin 사용자의 시연 수정 권한 확장
  - Admin 사용자는 모든 상태의 시연을 수정할 수 있도록 변경
  - 일반 사용자는 기존과 동일하게 상태별 제한 적용
  - 상태 필터링 로직을 Admin과 일반 사용자로 분리하여 처리
  - 동시성 체크도 일반 사용자에게만 적용하여 Admin의 유연성 확보

### 추가됨 (Added)

- **UTC+9 시간대 처리**: 시연 수정 시 한국 시간대 자동 변환
  - 시연 수정 모달에서 시간 입력 시 자동으로 UTC+9로 변환
  - 기존 시연 데이터 로드 시 UTC+9 시간으로 표시
  - 제출 시 서버로 전송하는 시간을 UTC+9로 변환
  - 시간대 차이로 인한 오류 방지 및 일관성 확보
  - convertToUTC9, convertFromUTC9 유틸리티 함수 추가
  - **시간 변환 강화**: 어떤 형식의 시간이든 무조건 UTC+9로 변환하여 서버 전송
- **DateTimePicker UTC+9 변환**: DateTimePicker 컴포넌트에서 시간 입력 시 자동으로 UTC+9로 변환
  - 시간 선택, 빠른 선택, 초기화 등 모든 시간 관련 동작에서 UTC+9 변환 적용
  - 시연 수정 시 DateTimePicker를 통한 시간 입력도 자동 UTC+9 변환

### 수정됨 (Fixed)

- **시간 처리 일관성**: 시연 수정 시 시간대 불일치 문제 해결
  - 클라이언트 시간대와 서버 시간대 간 차이로 인한 오류 방지
  - 한국 시간대(UTC+9) 기준으로 통일하여 정확한 시간 처리
  - 시연 상차/회수 시간의 정확성 향상
- **시연 수정 날짜 형식 오류**: 날짜 형식 검증 개선 및 UTC+9 변환 강화
  - 다양한 날짜 형식(YYYY-MM-DD, YYYY/MM/DD, YYYY.MM.DD) 허용
  - 시연 수정 시 모든 날짜 필드를 UTC+9로 강제 변환하여 서버 전송
  - "상차 일자 형식이 올바르지 않습니다", "회수 일자 형식이 올바르지 않습니다" 오류 해결
  - **기존 시연 데이터 로드 시 날짜 정규화**: UTC+9 패치 이전에 생성된 시연 데이터의 날짜 형식 자동 정규화
  - ISO 문자열, 다양한 날짜 형식을 YYYY-MM-DD로 자동 변환하여 표시

## v1.6.1 (2025-08-04)

### 수정됨 (Fixed)

- **승인된 시연 수정 제한**: 승인된 시연의 수정 시도 시 적절한 에러 처리 추가
  - DemoEditModal에서 승인된 시연 수정 시도 시 프론트엔드에서 차단
  - 시연 상세 페이지에서 승인된 시연에 대해 안내 메시지 표시
  - "승인된 시연은 수정할 수 없습니다" 메시지로 사용자에게 명확한 안내
  - 백엔드 API 에러(400) 발생 전에 프론트엔드에서 사전 차단
  - 모든 수정 불가능한 상태(승인, 반려, 출고팀 확인, 출고 완료, 출고 보류, 시연 종료)에 대한 통합 처리
  - 권한 확인 로직 강화 (본인 작성 시연 또는 Admin만 수정 가능)
  - 구체적인 에러 메시지 제공 (네트워크, 권한, 파일 업로드 등)
  - 데이터 유효성 검증 강화 (수량, 날짜/시간 형식, 전화번호 형식 등)
  - 동시성 문제 방지 (시연 상태 변경 시 수정 차단)
  - 추가 에러 상황 처리 (존재하지 않는 시연, 재고 부족, 서버 저장공간 부족 등)
  - 시연 아이템 수량 제한 제거 (팀에서 알아서 처리하도록 허용)

## v1.6.0 (2025-08-04)

### 추가됨 (Added)

- **제목 자동 생성 기능**: 발주 제목이 없을 때 자동으로 의미있는 제목 생성
  - "출고 창고에서 @@품목 등 출고" 형식으로 자동 제목 생성
  - 단일 품목: "창고명에서 품목명 출고"
  - 여러 품목: "창고명에서 첫번째품목명 등 N개 품목 출고"
  - 창고 정보가 없는 경우 "알 수 없는 창고"로 표시
- **아이템 코드 표시**: 주문 품목 목록에서 아이템 이름과 함께 코드 표시
  - 아이템 이름 뒤에 괄호로 아이템 코드 표시 (예: "품목명 (ITEM001)")
  - 회색 작은 글씨로 코드 구분하여 가독성 향상

### 개선됨 (Improved)

- **주문 품목 목록 UI 개선**: PC 버전에서 더 나은 가독성과 사용성 제공
  - 레이아웃을 2열 하단 전체 너비로 변경하여 더 넓은 공간 활용
  - 스크롤 제거로 모든 품목을 한 번에 확인 가능
  - 각 품목의 패딩 증가로 더 여유로운 레이아웃
  - 품목 개수 표시로 전체 규모 파악 용이
- **발주 목록 가독성 향상**: 제목 자동 생성으로 더 명확한 발주 식별
  - 제목이 없는 발주도 의미있는 정보 제공
  - 창고와 품목 정보를 통한 직관적인 발주 내용 파악
  - 검색 및 필터링 시 더 정확한 결과 제공

### 변경됨 (Changed)

- **PC 레이아웃 구조**: 발주 상세 정보 표시 방식 개선
  - 상단: 발주 상세 정보 + 배송 정보 (2열)
  - 하단: 주문 품목 목록 (전체 너비)
  - 더 효율적인 공간 활용과 정보 계층 구조 개선

## v1.5.8 (2025-08-01)

### 추가됨 (Added)

- **Order 제목 필드**: 발주 시스템에 제목(title) 필드 추가
  - Order 인터페이스에 title 필드 추가
  - CreateOrderDto, UpdateOrderDto, CreatOrderResponse에 title 필드 추가
  - OrderRequestFormData 타입에 title 필드 추가
  - IOrderRecord 인터페이스에 title 필드 추가
- **발주 폼 제목 입력**: 모든 발주 폼에 제목 입력 필드 추가
  - OrderRequestForm: 일반 발주 요청 폼에 제목 입력 필드 추가
  - OrderEditModal: 발주 수정 모달에 제목 입력 필드 추가
  - WheelchairOrderForm: 휠체어 발주 폼에 제목 입력 필드 추가
- **발주 목록 제목 표시**: OrderRecordTabs에서 제목 컬럼 추가
  - 테이블 헤더에 "제목" 컬럼 추가
  - 데스크톱/모바일 UI 모두에서 제목 표시
  - 제목이 없는 경우 "제목 없음" 표시
- **제목 필드 검증**: 모든 발주 폼에서 제목 필수 입력 검증 추가
  - validateForm 함수에 title 필드 검증 로직 추가
  - 제목이 비어있을 경우 에러 메시지 표시

### 개선됨 (Improved)

- **발주 목록 UI**: 제목 컬럼 추가로 더 명확한 발주 식별 가능
  - 테이블 레이아웃 최적화 (컬럼 너비 조정)
  - 제목 툴팁으로 긴 제목 전체 내용 확인 가능
  - 모바일 UI에서 제목을 첫 번째 줄에 표시하여 가독성 향상
- **사용자 경험**: 제목 입력으로 발주 목적과 내용을 더 쉽게 파악 가능
  - 발주 요청 시 제목 입력으로 명확한 식별자 제공
  - 발주 목록에서 제목으로 빠른 검색 및 식별 가능

### 수정됨 (Fixed)

- **타입 호환성**: Order 관련 모든 타입에 title 필드 일관성 있게 추가
  - convertToOrderRecord 함수에서 title 필드 매핑 추가
  - orderService에서 title 필드 처리 추가
  - 모든 발주 관련 컴포넌트에서 title 필드 지원

## v1.5.7 (2025-07-29)

### 수정됨 (Fixed)

- **데모 코멘트 API 에러**: 댓글 불러오기/보내기 기능 완전 수정
  - 댓글 조회 API: `POST` → `GET` 메서드로 변경 (`/demo/${id}/comments`)
  - 댓글 수정 API: 수정할 데이터(`content`)를 파라미터로 받도록 수정
  - 댓글 수정 API: `PUT` → `PATCH` 메서드로 변경 (REST API 관례 준수)
  - 댓글 삭제 API: 올바른 엔드포인트 사용 (`/demo/comments/${commentId}`)
  - 에러 메시지: 각 API별로 적절한 에러 메시지로 변경
- **데모 코멘트 사용자명 표시**: 댓글 작성자명이 '익명'으로 표시되는 문제 해결
  - `DemoComment` 타입에 `userName` 필드 추가
  - 댓글 표시 시 `userName` 우선, 없으면 `user.name`, 마지막으로 "익명" 표시
  - 백엔드 API 응답 구조에 맞는 타입 정의 개선
- **댓글 수정 기능**: 수정할 내용을 제대로 전달하지 않는 문제 해결
  - 댓글 수정 뮤테이션에서 `UpdateDemoCommentDto` 데이터 전달
  - 댓글 수정 핸들러에서 수정할 내용을 `data` 객체로 전달

### 개선됨 (Improved)

- **데모 코멘트 디버깅**: API 응답 및 댓글 데이터 콘솔 로그 추가
  - 댓글 조회 시 API 응답 구조 확인 가능
  - 실제 데이터 구조 파악을 위한 디버깅 로그 추가

### 변경됨 (Changed)

- **데모 코멘트 타입 구조**: `DemoComment` 인터페이스 개선
  - `userName` 필드 추가로 백엔드 응답 구조와 일치
  - `user` 객체를 선택적 필드로 변경하여 유연성 향상

## v1.5.6 (2025-07-18)

### 추가됨 (Added)

- **시연 상세 페이지 구현**: 시연 기록의 상세 정보를 확인하고 관리할 수 있는 전용 페이지 추가
  - `/demoRecord/[id]` 경로로 시연 상세 페이지 접근 가능
  - 시연 목록에서 "상세보기" 버튼을 통한 직관적인 네비게이션
  - 인증 및 권한 기반 접근 제어 시스템
  - 시연 기본 정보, 일정 정보, 시연품 목록, 첨부파일 표시
- **시연 상태 변경 드롭다운**: 상세 페이지에서 권한에 따른 상태 변경 기능
  - Moderator: 초기 승인 단계 (요청 → 승인/반려)
  - Admin: 출고 단계 (출고팀 확인 → 출고 완료/보류 → 시연 종료)
  - 권한별 상태 변경 옵션 제한 및 안내 메시지
- **시연 수정 모달**: 상세 페이지에서 시연 정보 수정 기능
  - 시연 제목, 일정, 주소, 담당자 정보 수정
  - 시연품 추가/삭제 및 수량 변경
  - 파일 업로드 및 삭제 기능
  - 권한 기반 수정 권한 제어
- **시연 파일 관리 API**: 시연 관련 파일 업로드 및 삭제 기능
  - `uploadMultipleDemoFileById`: 다중 파일 업로드 지원
  - `deleteDemoFile`: 개별 파일 삭제 기능
  - 서명된 URL을 통한 안전한 파일 처리

### 개선됨 (Improved)

- **시연 목록 페이지 네비게이션**: 시연 카드 클릭 시 상세 페이지로 이동하는 기능 추가
  - 기존 확장/축소 기능 유지하면서 상세보기 버튼 추가
  - 직관적인 사용자 경험을 위한 명확한 버튼 디자인
- **상태 변경 UI/UX**: 상세 페이지의 상태 변경 드롭다운 개선
  - 그라데이션 배경과 향상된 시각적 디자인
  - 커스텀 드롭다운 화살표 아이콘
  - 로딩 상태 표시 및 권한별 안내 메시지
  - 부드러운 전환 효과와 포커스 상태
- **에러 처리 및 로딩 상태**: 상세 페이지의 사용자 피드백 개선
  - 상세한 스켈레톤 UI로 로딩 상태 표시
  - 토스트 알림을 통한 에러 및 성공 메시지
  - 권한별 정보 표시 (파란색 정보 박스, 노란색 경고 박스)

### 수정됨 (Fixed)

- **시연 목록 페이지 에러**: `lastExpandedId` 변수 미정의 에러 수정
- **API 함수 누락**: `deleteDemoFile` 함수 추가로 파일 삭제 기능 완성
- **타입 캐스팅 이슈**: DemoDetailResponse와 DemoResponse 간 타입 호환성 문제 해결
- **불필요한 import 제거**: 사용하지 않는 아이콘 및 변수 정리

### 변경됨 (Changed)

- **시연 상세 페이지 접근 방식**: URL 파라미터 방식에서 직접 라우팅 방식으로 변경
- **상태 변경 권한 표시**: 권한이 없는 사용자에게도 명확한 안내 메시지 제공
- **파일 관리 시스템**: 시연 전용 파일 업로드/삭제 API 분리

## v1.5.5 (2025-07-18)

### 변경됨 (Changed)

- **DemoStatus enum 업데이트**: 시연 상태 관리 시스템 개선
  - `demoShipmentCompleted` → `shipmentCompleted` (출고 완료)
  - `demoCompletedAndReturned` → `demoCompleted` (시연 종료)
  - `demoShipmentRejected` → `rejectedByShipper` (출고자 반려) 추가
  - 상태별 명확한 의미 구분으로 비즈니스 로직 개선
- **시연 상태 흐름 개선**: 출고자 반려 상태 추가로 더 세밀한 상태 관리
- **UI/UX 개선**: 새로운 상태에 맞는 아이콘 및 색상 적용
  - 출고자 반려: 주황색 테마 및 XCircle 아이콘
  - 시연 종료: 회색 테마 및 Calendar 아이콘

### 수정됨 (Fixed)

- **시연 상태 변경 로직**: 새로운 DemoStatus enum에 맞게 상태 변경 로직 업데이트
- **상태 표시 텍스트**: 각 상태별 명확한 한글 표시로 사용자 이해도 향상
- **권한 기반 상태 변경**: 새로운 상태에 대한 권한 제어 로직 적용

### 문서화 (Documentation)

- **시연 시스템 비즈니스 로직 문서 업데이트**: 새로운 상태 흐름 및 설명 반영
- **DemoStatus enum 문서화**: 각 상태별 의미와 권한 설명 추가

## v1.5.4 (2025-07-18)

### 추가됨 (Added)

- **시연 비용 입력 필드 포맷팅**: 3자리씩 쉼표 구분으로 표시 (예: 1,000,000원)
- **시연 비용 필드 라벨 개선**: "VAT 포함" 표기 추가
- **API 미개발 상태 표기**: DemonstrationRequestForm에 명확한 주석과 경고 추가
  - 파일 상단에 API 미개발 상태 주석 추가
  - 콘솔 경고로 개발자에게 알림
  - 제출 버튼에 API 미개발 상태 표기
  - 성공 메시지에 데모용임을 명시

### 개선됨 (Improved)

- **시연 비용 입력 사용자 경험**:
  - 숫자 자동 포맷팅으로 가독성 향상
  - 플레이스홀더에 예시 추가 ("시연 비용을 입력하세요 (예: 1,000,000)")
  - 입력 필드 타입을 text로 변경하여 쉼표 입력 가능
- **API 미개발 상태 알림 시스템**:
  - 개발자용 콘솔 경고 메시지
  - 사용자용 버튼 툴팁 및 성공 메시지
  - TODO 주석으로 향후 구현 계획 명시

### 수정됨 (Fixed)

- **시연 비용 입력 필드 타입**: number에서 text로 변경하여 쉼표 포맷팅 지원
- **불필요한 파일 정리**: demo-item-list-for-team-57.ts 파일 삭제
- **타입 정의 개선**: OrderRequestFormData 타입에 demoCost 필드 추가

## v1.5.3 (2025-07-15)

### 추가됨 (Added)

- **IO History 페이지 페이지네이션 기능**: 대량의 입출고 기록을 효율적으로 관리할 수 있는 페이지네이션 시스템 추가
  - 페이지당 10개 항목으로 제한하여 성능 최적화
  - 필터 변경 시 자동으로 첫 페이지로 이동하는 UX 개선
  - 총 항목 수 및 현재 페이지 정보 표시
- **모바일 UI의 OrderRecord 댓글 기능**: 모바일 환경에서도 발주 기록에 대한 댓글 작성 및 관리 가능
  - 댓글 작성, 수정, 삭제 기능 (권한 기반)
  - 상대적 시간 표시 (방금 전, N분 전, N시간 전)
  - 수정된 댓글의 경우 "(수정됨)" 표시
  - 실시간 댓글 목록 업데이트

### 개선됨 (Improved)

- **IO History 페이지 UI/UX 개선**:
  - 기본 조회 기간을 30일에서 3개월로 확장 (현재 월 포함하여 3개월)
  - 날짜 필터 레이아웃을 반응형 그리드로 개선
  - 필터 초기화 시 페이지네이션도 함께 초기화
  - 로딩 상태 UI 개선
- **OrderRecord 수정 기능 개선**:
  - Admin 전용 발주 상태 변경 기능 추가
  - 과거 날짜 검증 로직 제거로 더 유연한 날짜 설정 가능
  - 기존 발주 상태 유지 로직 개선

### 수정됨 (Fixed)

- **발주 상태 편집 활성화**: Admin 사용자가 발주 상태를 직접 변경할 수 있도록 수정
- **오더 수정 관련 버그 수정**: 발주 수정 시 상태가 올바르게 유지되도록 수정
- **페이지네이션 필터 동기화**: 필터 변경 시 페이지네이션이 올바르게 초기화되도록 수정

### 변경됨 (Changed)

- **IO History 페이지 기본 조회 기간**: 30일 → 3개월로 확장
- **OrderRecord 모바일 UI**: 댓글 섹션이 모바일 환경에서도 표시되도록 변경
- **Admin 권한 확장**: 발주 상태 직접 변경 권한 추가

## v1.5.2 (2024-07-16)

- **발주 상세(/orderRecord/[id]) 비로그인 접근 시 로그인 모달 표시**
  - 기존 alert/리다이렉트 대신 로그인 모달을 띄워, 현재 페이지에서 바로 로그인 가능하도록 개선
- **안내문구 UI 개선**
  - 안내문구를 로그인 카드 내부 상단에 명확하게 노출
  - 카드와 안내문구가 자연스럽게 한 덩어리로 보이도록 구조 변경
- **오버레이(회색 배경) UX 개선**
  - 오버레이(바깥쪽) 클릭 시 모달이 닫히지 않도록 변경 (pointer-events-none 적용)
  - 로그인하지 않은 상태에서는 모달을 강제로 항상 열어두도록 UX 개선
- **X(닫기) 버튼 조건부 노출**
  - 로그인하지 않은 상태에서는 X(닫기) 버튼이 보이지 않음 (흰 화면만 남는 현상 방지)
  - 로그인 상태에서만 X 버튼이 노출됨
- **LoginModal 컴포넌트의 변경은 해당 컴포넌트를 사용하는 페이지에만 적용**
  - 타 페이지(다른 기능, 다른 라우트, 전역 상태 등)에는 side effect 없음
- **버전 1.5.2로 상향**

## v1.5.1

### 개선됨 (Improved)

- **시연 신청 폼 UI/UX 개선**: 창고 선택 드롭다운 단일화 및 자동 선택 로직 개선(시연 창고 우선, 없으면 첫 창고)
- **시연 아이템 선택 개선**: 창고별 실제 재고 아이템 목록을 기반으로 동적 선택 UI 제공
- **체크박스 및 수량 조절 로직 개선**: teamItem 기준으로 체크/수량/전체선택 동작 일원화, 선택된 아이템 요약 표시
- **불필요한 정보(창고 주소 등) 제거**: 시연 신청 폼에서 창고 정보는 드롭다운만 노출
- **실제 재고 연동**: 창고 변경 시 해당 창고의 실재고 아이템만 선택 가능

### 수정됨 (Fixed)

- **체크박스 동작 오류 수정**: teamItem 기준으로 체크/해제 및 수량 조절이 올바르게 동작하도록 수정
- **전체 선택/해제 동작 오류 수정**
- **선택된 아이템 요약 표시 오류 수정**

### 문서화 (Documentation)

- **README, 시연 시스템 비즈니스 로직, 업데이트 내역 등 문서 최신화**
- **/update 페이지 changelog UI 최신화**

## [1.5.0] - 2025-07-04

### 추가됨 (Added)

- **시연 시스템**: 제품 시연을 위한 전용 관리 시스템
  - 데모 요청, 승인, 시연 출고, 복귀 완료까지의 전체 워크플로우
  - 시연 출고 시 자동 재고 차감 및 복귀 시 재고 복구
  - 데모 전용 상태 관리 (DemoStatus enum)
  - 팀별 데모 데이터 격리 및 관리
- **휠체어 발주 시스템**: 휠체어 전용 창고 및 카테고리로 제한된 발주 기능
  - 휠체어 전용 창고 ("캥스터즈 안산 연구소/휠체어")로만 발주 가능
  - 휠체어 관련 카테고리 ("휠체어", "K-MS2 휠체어 옵션품", "휠체어 악세사리")만 선택 가능
  - 보라색 테마로 일반 발주와 구분
  - 기존 발주 시스템과 동일한 승인 워크플로우
- **공통 컴포넌트 시스템**: 발주 관련 폼의 재사용 가능한 컴포넌트
  - AddressSection: 주소 검색 및 입력 기능
  - ContactInfoSection: 담당자 정보 입력
  - DateInfoSection: 날짜 정보 입력
  - FileUploadSection: 파일 업로드 기능 (50MB 이하)
  - NotesSection: 메모 입력
  - RecipientInfoSection: 수령인 정보 입력
  - SupplierSection: 거래처 선택
  - SubmitButton: 제출 버튼
  - 테마별 색상 지원 (파란색: 일반, 보라색: 휠체어)
- **댓글 시스템**: 발주 기록에 대한 소통 및 협업 기능
  - 발주별 실시간 댓글 작성 및 관리
  - 권한 기반 댓글 수정/삭제 (작성자 본인 + Admin)
  - 상대적 시간 표시 (방금 전, N분 전, N시간 전)
  - 수정된 댓글의 경우 "(수정됨)" 표시
  - React Query를 통한 효율적인 캐싱 (30초 staleTime, 5분 gcTime)
  - 사용자 친화적 UI 및 실시간 업데이트
- **파일 업로드 및 주소 검색 훅**: 공통 기능을 위한 전용 훅
  - useFileUpload: 파일 업로드 상태 관리 및 드래그 앤 드롭 지원
  - useAddressSearch: 주소 검색 모달 상태 관리 및 다음 포스트 API 연동
- **품목 선택 모달 개선**: 카테고리 필터링 및 중복 방지 기능
  - 특정 카테고리만 표시 가능한 필터링 기능
  - 이미 추가된 품목의 추가 버튼 비활성화
  - 재고 수량 표시 및 반응형 디자인

### 변경됨 (Changed)

- 발주 시스템 콘셉트를 4개에서 6개로 확장 (휠체어 발주, 시연 추가)
- 발주 & 시연 카테고리 기능 목록 업데이트
- 시연 기능을 "개발 중"에서 정식 기능으로 변경
- 카테고리 분류 체계에서 휠체어 관련 내용 구체화
- 워크플로우 설명을 일반 발주와 시연으로 분리

### 개선됨 (Improved)

- **발주 시스템 통합**: 개별 품목, 패키지, 휠체어 발주를 통합 관리
- **권한 시스템 강화**: 시연 시스템과 휠체어 발주에 대한 권한 제어
- **UI/UX 개선**: 공통 컴포넌트를 통한 일관된 사용자 경험
- **캐싱 전략 최적화**: 시연 시스템 30분 캐싱, 댓글 시스템 30초 캐싱
- **반응형 디자인**: 모든 새로운 기능의 모바일 환경 최적화
- **접근성 향상**: 모든 입력 필드에 적절한 라벨 및 접근성 속성 추가

### 수정됨 (Fixed)

- **재고 수량 수정 중복 문제**: 단순 수량 수정 시 불필요한 재고 기록 생성 제거
- **캐시 무효화 정확성**: 올바른 쿼리 키 사용으로 화면 반영 보장
- **권한별 상태 변경 제한**: Moderator와 Admin의 상태 변경 권한 명확히 구분
- **댓글 권한 체계**: 작성자 본인 수정/삭제, Admin 전체 관리 권한 정확히 구현

### 보안 (Security)

- **댓글 입력 검증**: XSS 방지를 위한 HTML 태그 필터링
- **권한 기반 접근 제어**: 댓글 수정/삭제 시 권한 검증 강화
- **파일 업로드 보안**: 파일 크기 제한 및 유형 검증

### 문서화 (Documentation)

- **LLM 수정 가이드라인 업데이트**: 시연 시스템, 휠체어 발주, 댓글 시스템 관련 가이드라인 추가
- **사용법 가이드 업데이트**: 새로운 기능들의 상세한 사용법 안내
- **API 문서 업데이트**: 댓글 시스템 API 엔드포인트 문서화

## [1.4.1] - 2025-06-20

### 변경됨 (Changed)

- 업체관리 기능을 재고관리 탭으로 이동
  - 기존 관리자 탭에서 재고관리 탭으로 메뉴 위치 변경
  - user, moderator 권한 사용자도 업체관리 기능 접근 가능하도록 권한 확장
  - 접근 권한을 ["user", "admin", "moderator"]로 설정

### 개선됨 (Improved)

- 사용자 경험 향상: 일반 사용자와 1차승인권자도 업체관리 기능 이용 가능
- 메뉴 구조 개선: 업체관리 기능을 논리적으로 재고관리 탭에 배치

## [1.4.0] - 2025-06-20

### 추가됨 (Added)

- 발주 상태 변경 시 권한별 제한 기능 구현
  - Moderator: `requested`, `approved`, `rejected` 상태만 변경 가능
  - Admin: `approved`, `confirmedByShipper`, `shipmentCompleted`, `rejectedByShipper` 상태만 변경 가능
- 출고 관련 상태 변경 시 재고 확인 로직 추가
  - 재고 부족 시 상세한 부족 품목 목록과 함께 에러 메시지 표시
  - 재고 충분 시 확인 메시지 후 처리 진행
- 발주 상태 표시 개선
  - 각 상태별 직관적인 아이콘 추가
  - 현재 상태와 변경 옵션을 나란히 표시하는 UI 개선
- 서버 응답 호환성 개선 ("주문 접수" 문자열 처리)

### 변경됨 (Changed)

- 재고 수량 수정 로직 개선
  - 단순 수량 수정 시 불필요한 재고 기록 생성 제거
  - 중복 업데이트 방지로 성능 향상
- 발주 상태 변경 UI 개선
  - 권한에 따른 드롭다운 표시 제한
  - Admin은 특정 상태일 때만 드롭다운 표시
- 캐시 무효화 로직 개선
  - `useWarehouseItems` 쿼리 키와 일치하는 캐시 무효화
  - 화면 반영 문제 해결

### 수정됨 (Fixed)

- 재고 수량 수정 시 2개씩 증가하는 중복 업데이트 문제 해결
- 재고 수량 수정 후 화면에 반영되지 않는 캐시 동기화 문제 해결
- 발주 상태 변경 시 권한 제한이 적용되지 않는 문제 해결
- "주문 접수" 상태 표시 오류 수정 (requested와 동일 처리)

### 개선됨 (Improved)

- 사용자 경험 향상: 권한별 명확한 기능 제한으로 혼란 방지
- 성능 개선: 불필요한 재고 기록 생성 제거로 데이터베이스 부하 감소
- UI/UX 개선: 상태별 아이콘과 직관적인 상태 표시
- 데이터 일관성: 올바른 캐시 무효화로 실시간 데이터 동기화 보장

### 보안 (Security)

- 권한별 발주 상태 변경 제한으로 비즈니스 로직 보호
- 재고 확인 로직으로 출고 시 데이터 무결성 보장

## [1.3.0] - 2025-06-11

### 추가됨 (Added)

- /ioHistory 페이지에 입고/출고 버튼 및 기능 추가
- 입고/출고 처리 후 실시간 기록 반영 기능
- 입고/출고 기록 조회와 작업이 한 페이지에서 가능한 통합 UI
- AttachedFile 타입을 공통 타입으로 분리하여 재사용성 향상

### 변경됨 (Changed)

- /stock 페이지에서 입고/출고 버튼 제거 (재고 조회/수정 기능만 유지)
- /stock 페이지의 카테고리 토글이 기본적으로 열린 상태로 변경
- 입고/출고 기능을 /ioHistory 페이지로 이동하여 논리적 구조 개선
- AttachedFile 타입을 `/src/types/common.ts`로 이동

### 수정됨 (Fixed)

- 출고 관련 모든 메시지에서 "발주" → "출고" 워딩 수정
- 출고 모달 제목 및 버튼 텍스트 정확성 개선
- TypeScript 빌드 에러 해결 (AttachedFile 타입 import 오류)
- 출고 처리 시 일관된 용어 사용으로 사용자 혼란 방지

### 개선됨 (Improved)

- 사용자 경험 향상: 입출고 작업과 이력 확인이 한 곳에서 가능
- 코드 구조 개선: 관심사 분리를 통한 유지보수성 향상
- 즉시 반영: 입고/출고 처리 후 바로 기록 목록에서 확인 가능
- 타입 일관성: 공통 타입 사용으로 코드 중복 제거

### 보안 (Security)

- 입고/출고 기능에서 권한 제어 유지 (user 권한은 버튼 숨김)

## [1.2.0] - 2025-05-31

### 추가됨 (Added)

- 사용자별 창고 접근 권한 관리 시스템 (`restrictedWhs`) 구현
- UserManagementModal에 창고 접근 제한 설정 UI 추가
- 창고 권한 체크 유틸리티 함수 (`utils/warehousePermissions.ts`) 추가
- 권한 기반 창고 필터링 기능 (useWarehouseItems 훅에 통합)
- 발주 시스템에서 권한 기반 창고 접근 제어
- 발주 기록에서 권한 기반 데이터 필터링

### 변경됨 (Changed)

- IOrderRecord 타입에 warehouseId 필드 추가
- NewUserForm 인터페이스에 restrictedWhs 필드 추가
- OrderRequestForm에서 접근 불가 창고 비활성화 처리
- UserManagementModal 크기를 lg로 확대하여 창고 선택 UI 공간 확보
- 사용자 역할별 권한 체계 재정의 (Admin, Moderator, User, Supplier)

### 개선됨 (Improved)

- 사용자 생성 시 창고 접근 권한을 직관적으로 설정할 수 있는 체크박스 UI
- 접근 불가능한 창고 선택 시 명확한 에러 메시지 표시
- 권한에 따른 시각적 구분 (비활성화, 색상 변경 등)
- 타입 안전성 강화 및 TypeScript 일관성 개선

### 보안 (Security)

- 창고 접근 권한 검증 로직을 프론트엔드와 백엔드에서 이중으로 적용
- Admin이 아닌 사용자의 데이터 접근 범위 제한 강화

## [1.1.0] - 2025-05-23

### 추가됨 (Added)

- 발주 요청 후 부드러운 페이지 전환 기능
- 발주 상세 정보 확장 표시 기능
- 발주 요청 완료 후 자동 페이지 이동 기능

### 변경됨 (Changed)

- 출고 완료 후 재고 자동 반영 로직 개선

### 개선됨 (Improved)

- 발주 요청 UX 개선 (로딩 표시 추가)
- 발주 기록 페이지 사용성 향상

## [1.0.0] - 2025-04-29

### 추가됨 (Added)

- 초기 KARS 시스템 출시
- 재고 관리 시스템
- 발주 관리 시스템
- 패키지 관리 시스템
- 사용자 관리 시스템
- 역할 기반 접근 제어 (RBAC)
- 실시간 재고 업데이트
- 재고 알림 시스템
- 카테고리별 재고 관리
- 반응형 디자인
- 모바일 최적화

### 기술 스택 (Tech Stack)

- React 18.2.0
- TypeScript 5
- Next.js 15.1.3
- Tailwind CSS 3.4.1
- Zustand 5.0.3
- TanStack React Query 5.71.1
- Axios 1.7.9
- Lucide React 0.469.0

---

## 형식 안내

- **추가됨 (Added)**: 새로운 기능
- **변경됨 (Changed)**: 기존 기능의 변경사항
- **더 이상 사용되지 않음 (Deprecated)**: 곧 제거될 기능
- **제거됨 (Removed)**: 이번 버전에서 제거된 기능
- **수정됨 (Fixed)**: 버그 수정
- **보안 (Security)**: 보안 관련 변경사항
- **개선됨 (Improved)**: 기존 기능의 개선사항
